/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("streamlit-component-lib")):"function"==typeof define&&define.amd?define(["streamlit-component-lib"],t):"object"==typeof exports?exports.FractalNavigation=t(require("streamlit-component-lib")):e.FractalNavigation=t(e["streamlit-component-lib"])}(self,e=>(()=>{var t={289:t=>{"use strict";t.exports=e},785:()=>{function e(){var n,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function l(e,o,a,i){var l=o&&o.prototype instanceof s?o:s,u=Object.create(l.prototype);return t(u,"_invoke",function(e,t,o){var a,i,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,i=0,l=n,f.n=t,c}};function p(e,t){for(i=e,l=t,r=0;!d&&s&&!o&&r<u.length;r++){var o,a=u[r],p=f.p,y=a[2];e>3?(o=y===t)&&(l=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=e<2&&p<a[1])?(i=0,f.v=t,f.n=a[1]):p<y&&(o=e<3||a[0]>t||t>y)&&(a[4]=e,a[5]=t,f.n=y,i=0))}if(o||e>1)return c;throw d=!0,t}return function(o,u,y){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,y),i=u,l=y;(r=i<2?n:l)||!d;){a||(i?i<3?(i>1&&(f.n=-1),p(i,l)):f.n=l:f.v=l);try{if(s=2,a){if(i||(o="next"),r=a[o]){if(!(r=r.call(a,l)))throw TypeError("iterator result is not an object");if(!r.done)return r;l=r.value,i<2&&(i=0)}else 1===i&&(r=a.return)&&r.call(a),i<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=n}else if((r=(d=f.n<0)?l:e.call(t,f))!==c)break}catch(e){a=n,i=1,l=e}finally{s=1}}return{value:r,done:d}}}(e,a,i),!0),u}var c={};function s(){}function u(){}function d(){}r=Object.getPrototypeOf;var f=[][a]?r(r([][a]())):(t(r={},a,function(){return this}),r),p=d.prototype=s.prototype=Object.create(f);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,t(p,"constructor",d),t(d,"constructor",u),u.displayName="GeneratorFunction",t(d,i,"GeneratorFunction"),t(p),t(p,i,"Generator"),t(p,a,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:l,m:y}})()}function t(e,n,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,n,r,o){function i(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?a?a(e,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[n]=r:(i("next",0),i("throw",1),i("return",2))},t(e,n,r,o)}function n(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var r,o,a,i,l,c,s={},u="TR",d=["TR"],f=null,p=!1,y=Math.round(42),m=[];function h(){var e=document.querySelector(".fractal-container");a=e.clientWidth||window.innerWidth,i=e.clientHeight||window.innerHeight,r.width=a,r.height=i,l=a/2,c=i/2}function v(){if(!p){var e,t,n,r,f=s[u];if(!f)return o.fillStyle="#1a1a2e",o.fillRect(0,0,a,i),o.fillStyle="#ef4444",o.font="bold 24px sans-serif",o.textAlign="center",o.textBaseline="middle",void o.fillText("Erreur: DonnÃ©es non disponibles",l,c);!function(e){var t=d.length,n=e.total||e.amount||0,r=e.children?e.children.length:0,o=(t/3).toFixed(1);document.getElementById("levelDisplay").textContent=t,document.getElementById("totalDisplay").textContent=I(n),document.getElementById("categoriesDisplay").textContent=r,document.getElementById("zoomDisplay").textContent=o+"x";var a=1===t?"#10b981":2===t?"#f59e0b":"#ef4444";document.getElementById("levelDisplay").style.color=a}(f),e=d.map(function(e){var t=s[e];return t?t.label:e}).join(" â†’ "),document.getElementById("breadcrumbText").innerHTML=e,t=d.length/3*100,document.getElementById("zoomProgress").style.width=t+"%",n=document.getElementById("backBtn"),r=document.getElementById("resetBtn"),n.disabled=d.length<=1,r.disabled="TR"===u,x(f)}}function x(e){o.fillStyle="rgba(15, 23, 42, 0.05)",o.fillRect(0,0,a,i),m=[];var t,n,r=e.children.length;0!==r?(1===r?(t=e.children[0],n=150*Math.sqrt(3)/2,m=[{p1:{x:l-75,y:c+n/2},p2:{x:l+75,y:c+n/2},p3:{x:l,y:c-n/2},code:t}]):m=2===r?function(e){var t=120,n=t*Math.sqrt(3)/2,r=100;return[{p1:{x:l-r-60,y:c+n/2},p2:{x:l-r+60,y:c+n/2},p3:{x:l-r,y:c-n/2},code:e.children[0]},{p1:{x:l+r-60,y:c+n/2},p2:{x:l+r+60,y:c+n/2},p3:{x:l+r,y:c-n/2},code:e.children[1]}]}(e):3===r?function(e){var t=100,n=t*Math.sqrt(3)/2;return[{p1:{x:l-t,y:c+n/2},p2:{x:l,y:c+n/2},p3:{x:l-50,y:c-n/2},code:e.children[0]},{p1:{x:l,y:c+n/2},p2:{x:l+t,y:c+n/2},p3:{x:l+50,y:c-n/2},code:e.children[1]},{p1:{x:l-50,y:c-n/2},p2:{x:l+50,y:c-n/2},p3:{x:l,y:c-n-50},code:e.children[2]}]}(e):4===r?function(e){var t=90,n=t*Math.sqrt(3)/2,r=70;return[{p1:{x:l-45,y:c-r-n/2},p2:{x:l+45,y:c-r-n/2},p3:{x:l,y:c-r-n-40},code:e.children[0]},{p1:{x:l+r-45,y:c+n/2},p2:{x:l+r+45,y:c+n/2},p3:{x:l+r,y:c-n/2},code:e.children[1]},{p1:{x:l-45,y:c+r+n/2},p2:{x:l+45,y:c+r+n/2},p3:{x:l,y:c+r-n/2},code:e.children[2]},{p1:{x:l-r-45,y:c+n/2},p2:{x:l-r+45,y:c+n/2},p3:{x:l-r,y:c-n/2},code:e.children[3]}]}(e):5===r?function(e){for(var t=80*Math.sqrt(3)/2,n=[],r=0;r<5;r++){var o=2*r*Math.PI/5-Math.PI/2,a=l+120*Math.cos(o),i=c+120*Math.sin(o);n.push({p1:{x:a-40,y:i+t/2},p2:{x:a+40,y:i+t/2},p3:{x:a,y:i-t/2},code:e.children[r]})}return n}(e):6===r?function(e){for(var t=80*Math.sqrt(3)/2,n=[],r=[],a=0;a<6;a++){var i=2*a*Math.PI/6,s=l+130*Math.cos(i),u=c+130*Math.sin(i);r.push({cx:s,cy:u}),n.push({p1:{x:s-40,y:u+t/2},p2:{x:s+40,y:u+t/2},p3:{x:s,y:u-t/2},code:e.children[a]})}o.strokeStyle="rgba(148, 163, 184, 0.2)",o.setLineDash([5,5]),o.lineWidth=1;for(var d=0;d<r.length;d++){var f=(d+1)%r.length;o.beginPath(),o.moveTo(r[d].cx,r[d].cy),o.lineTo(r[f].cx,r[f].cy),o.stroke()}return o.setLineDash([]),n}(e):function(e){for(var t=e.children.length,n=Math.max(50,200/Math.sqrt(t)),r=n*Math.sqrt(3)/2,o=Math.min(200,50+15*t),a=[],i=0;i<t;i++){var s=2*i*Math.PI/t-Math.PI/2,u=l+Math.cos(s)*o,d=c+Math.sin(s)*o;a.push({p1:{x:u-n/2,y:d+r/2},p2:{x:u+n/2,y:d+r/2},p3:{x:u,y:d-r/2},code:e.children[i]})}return a}(e),m.forEach(function(t,n){var r=e.children[n];!function(e,t,n){var r=e.p1,a=e.p2,i=e.p3;if(o.fillStyle=t?t.color:"#6b7280",o.beginPath(),o.moveTo(r.x,r.y),o.lineTo(a.x,a.y),o.lineTo(i.x,i.y),o.closePath(),o.fill(),o.strokeStyle=f===n?"rgba(255, 255, 255, 0.6)":"rgba(255, 255, 255, 0.2)",o.lineWidth=f===n?3:2,o.stroke(),t){var l=(r.x+a.x+i.x)/3,c=(r.y+a.y+i.y)/3;o.font="24px sans-serif",o.fillStyle="rgba(255, 255, 255, 0.9)",o.textAlign="center",o.textBaseline="middle",o.fillText({Revenus:"ðŸ’¼",DÃ©penses:"ðŸ›’",Salaire:"ðŸ’µ",Freelance:"ðŸ–¥ï¸",Investissement:"ðŸ“ˆ","Autres revenus":"ðŸ’°",Alimentation:"ðŸ”",SupermarchÃ©:"ðŸ›’",Restaurant:"ðŸ½ï¸",Boulangerie:"ðŸ¥–",Transport:"ðŸš—",Autoroute:"ðŸ›£ï¸",Essence:"â›½",Stationnement:"ðŸ…¿ï¸",Logement:"ðŸ ",Loyer:"ðŸ ",SantÃ©:"âš•ï¸",Loisirs:"ðŸŽ®",Factures:"ðŸ“„",Abonnement:"ðŸ“±",VÃªtements:"ðŸ‘•",Education:"ðŸ“š",Uca:"ðŸŽ“",Banque:"ðŸ¦",Assurance:"ðŸ›¡ï¸",Divers:"ðŸ“¦"}[t.label]||"ðŸ“",l,c-15),o.font="bold 12px sans-serif",o.fillStyle="rgba(255, 255, 255, 0.85)",o.fillText(t.label,l,c+10),o.font="11px monospace",o.fillStyle="rgba(16, 185, 129, 0.8)";var s=t.amount||t.total;o.fillText(I(s),l,c+25)}}(t,s[r],n)})):function(){var e=s[u],t=e.transactions||0;o.fillStyle="rgba(15, 23, 42, 0.5)",o.fillRect(0,0,a,i),o.fillStyle="#10b981",o.font="bold 20px sans-serif",o.textAlign="center",o.textBaseline="middle",o.fillText("".concat(e.label),l,c-30),o.fillStyle="#94a3b8",o.font="16px sans-serif",o.fillText("".concat(t," transaction(s)"),l,c+20),o.fillText(I(e.amount||0),l,c+50)}()}function g(e){if(!p)for(var t=r.getBoundingClientRect(),n=e.clientX-t.left,o=e.clientY-t.top,a=0;a<m.length;a++){var i=m[a];if(B(n,o,i))return void S(i.code)}}function b(e){for(var t=r.getBoundingClientRect(),n=e.clientX-t.left,o=e.clientY-t.top,a=null,i=null,l=0;l<m.length;l++){var c=m[l];if(B(n,o,c)){a=l,i=s[c.code];break}}f=a,r.style.cursor=null!==a?"pointer":"default";var d=document.getElementById("tooltip");if(i){d.style.display="block",d.style.left=e.clientX-t.left+15+"px",d.style.top=e.clientY-t.top-10+"px";var p=i.amount||i.total,y=i.percentage||0;d.innerHTML='\n            <div class="label">'.concat(i.label,'</div>\n            <div class="value">').concat(I(p),'</div>\n            <div class="percentage">').concat(y.toFixed(1),"%</div>\n        ")}else d.style.display="none";x(s[u])}function T(){f=null,document.getElementById("tooltip").style.display="none",x(s[u])}function S(e){return E.apply(this,arguments)}function E(){var t;return t=e().m(function t(n){var r,f,m,h,g;return e().w(function(e){for(;;)switch(e.n){case 0:if(n&&!p){e.n=1;break}return e.a(2);case 1:p=!0,r=0;case 2:if(!(r<y)){e.n=4;break}return f=r/y,o.fillStyle="rgba(15, 23, 42, ".concat(.05+.15*f,")"),o.fillRect(0,0,a,i),m=1+.2*f,o.save(),o.globalAlpha=1-f,o.translate(l,c),o.scale(m,m),o.translate(-l,-c),x(s[u]),o.restore(),e.n=3,R(1e3/60);case 3:r++,e.n=2;break;case 4:d.push(n),u=n,h=0;case 5:if(!(h<y)){e.n=7;break}return g=h/y,o.globalAlpha=g,x(s[u]),o.globalAlpha=1,e.n=6,R(1e3/60);case 6:h++,e.n=5;break;case 7:p=!1,Streamlit.setComponentValue({action:"zoom",code:n,level:d.length,timestamp:Date.now(),current_node:targetNode}),v();case 8:return e.a(2)}},t)}),E=function(){var e=this,r=arguments;return new Promise(function(o,a){var i=t.apply(e,r);function l(e){n(i,o,a,l,c,"next",e)}function c(e){n(i,o,a,l,c,"throw",e)}l(void 0)})},E.apply(this,arguments)}function w(){if(!(d.length<=1||p)){p=!0,d.pop(),u=d[d.length-1];for(var e=s[u],t=0;t<Math.floor(y/2);t++){var n=t/(y/2);o.globalAlpha=n,x(e),o.globalAlpha=1}p=!1,Streamlit.setComponentValue({action:"back",code:u,level:d.length,timestamp:Date.now(),current_node:u}),v()}}function M(){if("TR"!==u&&!p){d=["TR"],u="TR",p=!0;for(var e=0;e<y;e++){var t=e/y,n=1+.3*t;o.save(),o.globalAlpha=1-t,o.translate(l,c),o.scale(n,n),o.translate(-l,-c),x(s[u]),o.restore()}p=!1,Streamlit.setComponentValue({action:"reset",code:"TR",level:0,timestamp:Date.now(),current_node:"TR"}),v()}}function B(e,t,n){var r=n.p1,o=n.p2,a=n.p3,i=(o.y-a.y)*(r.x-a.x)+(a.x-o.x)*(r.y-a.y);if(0===i)return!1;var l=((o.y-a.y)*(e-a.x)+(a.x-o.x)*(t-a.y))/i,c=((a.y-r.y)*(e-a.x)+(r.x-a.x)*(t-a.y))/i;return l>=0&&c>=0&&1-l-c>=0}function I(e){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.abs(e))}function R(e){return new Promise(function(t){return setTimeout(t,e)})}Streamlit.setComponentValue(null),window.addEventListener("load",function(){r=document.getElementById("fractalCanvas"),o=r.getContext("2d"),h(),window.addEventListener("resize",h),Streamlit.setFrameHeight(document.body.scrollHeight),window.parent.addEventListener("streamlit:render",function(){var e=Streamlit.getComponentValue();e&&e.data&&(s=e.data,u="TR",d=["TR"],v())}),document.getElementById("backBtn").addEventListener("click",w),document.getElementById("resetBtn").addEventListener("click",M),r.addEventListener("click",g),r.addEventListener("mousemove",b),r.addEventListener("mouseleave",T),v()})}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";r.r(o),r.d(o,{default:()=>n});var e=r(289),t=r.n(e);r(785),t().setComponentReady(),t().setFrameHeight(document.body.scrollHeight),window.addEventListener("resize",function(){t().setFrameHeight(document.body.scrollHeight)});const n={}})(),o})());