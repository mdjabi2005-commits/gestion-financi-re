# ü§ñ Plan d'Impl√©mentation D√©taill√© - Squad Lamoms V2

## üìã Vision Globale

**Objectif Final** : Cr√©er une "organisation IA autonome" pour Gestio V4 avec 6 agents sp√©cialis√©s, capable de :
- Coacher l'utilisateur financi√®rement (conseils personnalis√©s)
- Maintenir et r√©parer le code automatiquement
- Apprendre de ses erreurs pour devenir autonome (sans APIs payantes)

**Contrainte Actuelle** : Aucun utilisateur r√©el ‚Üí On d√©veloppe et on teste avec VOUS comme utilisateur test

---

## üé® Architecture Visuelle - Les 3 Zones

![Architecture 3 Zones](C:/Users/djabi/.gemini/antigravity/brain/bcce6ffc-4d8e-44cd-828d-100ad4c2d4b2/uploaded_image_2_1767278929858.jpg)

**Zone Front (Mobile)** : Lamoms-COACH  
**Zone QG (Serveur)** : M√âCANICIEN, BIBLIOTH√âCAIRE, ANALYSTE  
**Zone Cloud** : EXPERT (n8n/Web), OpenAI API

---

## üîÑ Workflows Cl√©s

### Workflow 1 : Coaching Financier (Offensif)

![Workflow Coaching](C:/Users/djabi/.gemini/antigravity/brain/bcce6ffc-4d8e-44cd-828d-100ad4c2d4b2/uploaded_image_1_1767278929858.jpg)

1. **ANALYSTE** (Stagiaire) analyse logs utilisateur
2. Demande validation au **MENTORE** (Professeur)
3. **MENTORE** g√©n√®re conseil via OpenAI API
4. Conseil envoy√© au **COACH** (Mobile)
5. **COACH** affiche conseil + collecte feedback (üëç/üëé)
6. Feedback stock√© dans **DATASET D'APPRENTISSAGE**
7. **ANALYSTE** continue d'apprendre

### Workflow 2 : Maintenance Code (D√©fensif)

![Workflow Maintenance](C:/Users/djabi/.gemini/antigravity/brain/bcce6ffc-4d8e-44cd-828d-100ad4c2d4b2/uploaded_image_0_1767278929858.jpg)

1. **COACH** (Mobile) signale bug
2. **QG** (Serveur) re√ßoit alerte
3. **M√âCANICIEN** : "Connu dans la base ?"
4. **BIBLIOTH√âCAIRE** : Cherche solution
   - Si OUI ‚Üí Patch appliqu√©
   - Si NON ‚Üí Appel **EXPERT** (Cloud)
5. **EXPERT** recherche sur le Web
6. Solution trouv√©e ‚Üí **BIBLIOTH√âCAIRE** m√©morise
7. Probl√®me r√©solu ‚Üí **COACH** notifi√©

### Vision : Avant ‚Üí Apr√®s

![Transition Autonomie](C:/Users/djabi/.gemini/antigravity/brain/bcce6ffc-4d8e-44cd-828d-100ad4c2d4b2/uploaded_image_3_1767278929858.jpg)

**AVANT (D√©pendance)** :
- MENTORE (Professeur) + ANALYSTE (Stagiaire) ‚Üí OpenAI API Cloud ($$$)

**APR√àS (Autonomie - Objectif Final)** :
- MENTORE d√©sactiv√© ‚ùå
- ANALYSTE autonome ‚úÖ ‚Üí Dataset d'Apprentissage (Cerveau Complet)
- Co√ªt : $0/mois

---

## üë• L'√âquipe Compl√®te - Les 6 Agents

### Zone Front (Mobile)
1. **Lamoms-COACH** : Interface utilisateur, affichage conseils, collecte feedback

### Zone QG (Serveur)
2. **M√âCANICIEN** : R√©paration automatique du code
3. **BIBLIOTH√âCAIRE** : M√©moire (RAG), stockage solutions
4. **ANALYSTE** : Apprentissage continu (Stagiaire ‚Üí Autonome)
5. **MENTORE** : Professeur temporaire (sera d√©sactiv√©)

### Zone Cloud
6. **EXPERT** : Recherche Web pour probl√®mes inconnus

---

## üéØ Strat√©gie Globale : Approche Progressive

### Phase 0 : Pr√©paration (2-3 semaines) - **VOUS √äTES ICI**
- ‚úÖ Terminer apprentissage Python (Typing, Numpy, Streamlit)
- ‚è≥ Apprendre LangChain / LangGraph
- ‚è≥ Configurer environnement de d√©veloppement

### Phase 1 : MVP Coach Financier (4-6 semaines)
- Cr√©er COACH + MENTORE uniquement
- Tester le workflow de conseils financiers
- Valider la boucle de feedback (üëç/üëé)

### Phase 2 : Ajout Maintenance Auto (4-6 semaines)
- Ajouter M√âCANICIEN + BIBLIOTH√âCAIRE
- Impl√©menter auto-r√©paration du code
- Tester sur bugs r√©els de Gestio V4

### Phase 3 : Apprentissage Analyste (6-12 mois)
- Activer ANALYSTE en mode observation
- Collecter Dataset d'Or (1000+ feedbacks)
- Fine-tuner mod√®le local

### Phase 4 : Autonomie Totale (3-6 mois)
- Remplacer MENTORE par ANALYSTE
- Ajouter EXPERT (Cloud) pour cas complexes
- Optimiser co√ªts (objectif : <$20/mois)

---

# üìÖ PHASE 1 : MVP COACH FINANCIER (Priorit√© Imm√©diate)

## Objectif
Cr√©er un syst√®me minimal qui donne des conseils financiers √† l'utilisateur (vous) et apprend de vos feedbacks.

## Architecture Phase 1

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ZONE FRONT (Mobile)                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  LAMOMS-COACH                                        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Affiche conseils                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Collecte feedback (üëç/üëé)                         ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì ‚Üë (API REST)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ZONE QG (Serveur PC)                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  ORCHESTRATEUR (Python + LangChain)                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Collecte logs utilisateur                         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Appelle MENTORE                                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Stocke feedbacks                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  BIBLIOTH√âCAIRE (ChromaDB)                           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Stocke logs utilisateur                           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Stocke Dataset d'Or (conseils valid√©s)            ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì ‚Üë (API)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ZONE CLOUD (APIs)                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  LAMOMS-MENTORE (Gemini 1.5 Flash)                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Analyse logs utilisateur                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - G√©n√®re conseils financiers                        ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## √âtape 1.1 : Setup Environnement QG (3-5 jours)

### T√¢ches
- [ ] **Installer Docker** sur votre PC
- [ ] **Cr√©er projet Python** `squad_lamoms/`
- [ ] **Installer d√©pendances**
  ```bash
  pip install langchain langchain-google-genai chromadb fastapi uvicorn python-dotenv
  ```
- [ ] **Configurer API Keys**
  - Cr√©er compte Google AI Studio (gratuit)
  - Obtenir cl√© API Gemini 1.5 Flash
  - Cr√©er fichier `.env`

### Structure Projet
```
squad_lamoms/
‚îú‚îÄ‚îÄ .env                    # API keys
‚îú‚îÄ‚îÄ requirements.txt        # D√©pendances
‚îú‚îÄ‚îÄ main.py                 # Point d'entr√©e
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ settings.py         # Configuration
‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ orchestrator.py     # Chef d'orchestre
‚îÇ   ‚îú‚îÄ‚îÄ coach.py            # Agent Coach
‚îÇ   ‚îî‚îÄ‚îÄ mentore.py          # Agent Mentore
‚îú‚îÄ‚îÄ memory/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ chroma_store.py     # ChromaDB wrapper
‚îÇ   ‚îî‚îÄ‚îÄ dataset.py          # Gestion Dataset d'Or
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ routes.py           # API REST pour mobile
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ test_mentore.py     # Tests unitaires
```

### Livrables
- ‚úÖ Environnement Python fonctionnel
- ‚úÖ ChromaDB op√©rationnel (Docker)
- ‚úÖ API Gemini test√©e avec un prompt simple

---

## √âtape 1.2 : Cr√©er Agent MENTORE (5-7 jours)

### Workflow D√©taill√© du MENTORE

```
INPUT : Logs utilisateur (JSON)
{
  "user_id": "djabi",
  "period": "7_days",
  "transactions": [
    {"date": "2026-01-01", "categorie": "Alimentation", "montant": 45.50},
    {"date": "2026-01-02", "categorie": "Transport", "montant": 15.00}
  ],
  "budgets": {
    "Alimentation": {"budget": 300, "utilise": 245},
    "Transport": {"budget": 100, "utilise": 85}
  },
  "stats": {
    "total_depenses": 330,
    "categories_actives": 5,
    "budget_utilise_pct": 75
  }
}

PROCESSING :
1. MENTORE re√ßoit logs + contexte produit (depuis bibliotheque/)
2. Prompt √† Gemini 1.5 Flash :
   "Tu es un coach financier. Analyse ces donn√©es et donne UN conseil actionnable.
    Contexte : L'utilisateur utilise Gestio V4 pour g√©rer ses finances.
    Donn√©es : {logs}
    Conseil (max 2 phrases) :"

3. Gemini g√©n√®re : "Tu d√©penses beaucoup en transport cette semaine (+40% vs moyenne).
                     Essaie le covoiturage ou les transports en commun !"

OUTPUT : Conseil (string) + M√©tadonn√©es
{
  "conseil_id": "uuid-1234",
  "texte": "Tu d√©penses beaucoup en transport...",
  "categorie_ciblee": "Transport",
  "type": "reduction_depenses",
  "timestamp": "2026-01-01T10:00:00Z"
}
```

### T√¢ches
- [ ] **Cr√©er classe `MentoreAgent`**
  - M√©thode `analyze_logs(user_logs: dict) -> dict`
  - Int√©gration Gemini 1.5 Flash
  - Gestion erreurs API

- [ ] **Cr√©er prompts optimis√©s**
  - Prompt syst√®me (personnalit√© coach)
  - Prompt utilisateur (analyse logs)
  - Exemples few-shot (3-5 exemples de bons conseils)

- [ ] **Tester avec vos vraies donn√©es Gestio V4**
  - Exporter 1 semaine de transactions
  - G√©n√©rer 10 conseils diff√©rents
  - Valider pertinence

### Livrables
- ‚úÖ Agent MENTORE fonctionnel
- ‚úÖ 10 conseils g√©n√©r√©s et valid√©s manuellement
- ‚úÖ Temps de r√©ponse < 5 secondes

---

## √âtape 1.3 : Cr√©er Agent COACH (Mobile) (3-5 jours)

### Technologies
- **Option 1** : Streamlit (simple, rapide pour prototyper)
- **Option 2** : Flutter (production, cross-platform)
- **Recommandation** : Commencer avec Streamlit, migrer vers Flutter en Phase 2

### Interface COACH (Streamlit)
```python
import streamlit as st
import requests

st.title("üí∞ Gestio V4 - Coach Financier")

# Afficher dernier conseil
conseil = requests.get("http://localhost:8000/api/conseil/latest").json()

st.info(conseil["texte"])

# Feedback utilisateur
col1, col2 = st.columns(2)
with col1:
    if st.button("üëç Utile"):
        requests.post(f"http://localhost:8000/api/feedback/{conseil['id']}", 
                      json={"vote": "up"})
        st.success("Merci ! Ce conseil sera sauvegard√©.")

with col2:
    if st.button("üëé Inutile"):
        requests.post(f"http://localhost:8000/api/feedback/{conseil['id']}", 
                      json={"vote": "down"})
        st.warning("Merci ! On fera mieux la prochaine fois.")
```

### T√¢ches
- [ ] **Cr√©er interface Streamlit**
  - Page d'accueil avec dernier conseil
  - Boutons feedback (üëç/üëé)
  - Historique des conseils

- [ ] **Connecter √† API QG**
  - Endpoint `/api/conseil/latest`
  - Endpoint `/api/feedback/{id}`

- [ ] **Tester workflow complet**
  - G√©n√©rer conseil ‚Üí Afficher ‚Üí Feedback ‚Üí V√©rifier stockage

### Livrables
- ‚úÖ Interface COACH fonctionnelle
- ‚úÖ Workflow bout-en-bout test√©
- ‚úÖ Premier conseil valid√© avec üëç

---

## √âtape 1.4 : Impl√©menter Boucle d'Apprentissage (5-7 jours)

### Workflow Complet (Teacher-Student - Phase 1)

```
JOUR 1 :
1. Utilisateur (vous) utilise Gestio V4 normalement
2. Orchestrateur collecte logs (transactions, budgets, stats)
3. MENTORE analyse logs ‚Üí G√©n√®re conseil A
4. COACH affiche conseil A
5. Vous cliquez üëç ‚Üí Conseil A sauvegard√© dans Dataset d'Or

JOUR 2 :
1. Nouveaux logs collect√©s
2. MENTORE g√©n√®re conseil B
3. COACH affiche conseil B
4. Vous cliquez üëé ‚Üí Conseil B ignor√© (pas dans Dataset)

JOUR 7 :
- Dataset d'Or contient 5 conseils valid√©s (üëç)
- ANALYSTE (futur) pourra apprendre de ces exemples
```

### T√¢ches
- [ ] **Cr√©er table `dataset_or`** (SQLite ou ChromaDB)
  ```sql
  CREATE TABLE dataset_or (
    id TEXT PRIMARY KEY,
    logs_input TEXT,      -- JSON des logs utilisateur
    conseil_output TEXT,  -- Texte du conseil
    feedback TEXT,        -- 'up' ou 'down'
    timestamp DATETIME,
    metadata TEXT         -- JSON (cat√©gorie, type, etc.)
  );
  ```

- [ ] **Impl√©menter logique de sauvegarde**
  - Si feedback = üëç ‚Üí INSERT INTO dataset_or
  - Si feedback = üëé ‚Üí Ne rien faire

- [ ] **Cr√©er dashboard de monitoring**
  - Nombre de conseils g√©n√©r√©s
  - Taux de satisfaction (üëç / total)
  - Cat√©gories les plus conseill√©es

### Livrables
- ‚úÖ Dataset d'Or op√©rationnel
- ‚úÖ 20+ conseils valid√©s (üëç) apr√®s 1 mois de test
- ‚úÖ Dashboard de monitoring fonctionnel

---

## √âtape 1.5 : Optimisation Co√ªts Phase 1 (2-3 jours)

### Objectif
R√©duire les co√ªts API au maximum pendant la phase de test.

### Strat√©gies

#### 1. Utiliser Gemini 1.5 Flash au lieu de Pro
```
Gemini 1.5 Pro  : $7/1M tokens input, $21/1M tokens output
Gemini 1.5 Flash: $0.075/1M tokens input, $0.30/1M tokens output
‚Üí 100x moins cher !
```

#### 2. Limiter fr√©quence des conseils
```python
# Au lieu de g√©n√©rer 1 conseil/jour
# G√©n√©rer 1 conseil/semaine pendant les tests

CONSEIL_FREQUENCY = timedelta(days=7)  # Configurable
```

#### 3. Caching intelligent
```python
# Si logs similaires √† hier, ne pas r√©g√©n√©rer conseil
from langchain.cache import InMemoryCache
llm.cache = InMemoryCache()
```

#### 4. Batch processing
```python
# Analyser 7 jours de logs en une seule requ√™te
# Au lieu de 7 requ√™tes s√©par√©es
```

### Estimation Co√ªts Phase 1 (1 mois)
```
Hypoth√®ses :
- 1 conseil/semaine = 4 conseils/mois
- 1000 tokens input + 200 tokens output par conseil
- Gemini 1.5 Flash

Calcul :
Input  : 4 * 1000 tokens = 4K tokens = $0.0003
Output : 4 * 200 tokens  = 800 tokens = $0.00024
Total  : ~$0.001/mois

‚Üí Quasi gratuit pendant les tests !
```

### Livrables
- ‚úÖ Co√ªt mensuel < $1 pendant Phase 1
- ‚úÖ Configuration flexible (fr√©quence ajustable)
- ‚úÖ Logs de consommation API

---

# üìÖ PHASE 2 : MAINTENANCE AUTO (Apr√®s Phase 1)

## Objectif
Ajouter M√âCANICIEN + BIBLIOTH√âCAIRE pour auto-r√©parer le code de Gestio V4.

## Agents √† Impl√©menter

### M√âCANICIEN (Claude 3.5 Sonnet)
**Mission** : Surveiller logs d'erreurs et r√©parer le code

**Workflow** :
```
1. Script Python surveille gestio_v4/app.log
2. Si erreur d√©tect√©e ‚Üí Extraire stack trace
3. BIBLIOTH√âCAIRE : "Connais-tu cette erreur ?"
   - Si OUI ‚Üí Appliquer patch connu
   - Si NON ‚Üí Appeler M√âCANICIEN
4. M√âCANICIEN (Claude) analyse code + erreur
5. G√©n√®re patch (git diff)
6. Applique patch + teste
7. Si succ√®s ‚Üí BIBLIOTH√âCAIRE m√©morise solution
```

### BIBLIOTH√âCAIRE (ChromaDB + RAG)
**Mission** : Stocker et retrouver solutions aux bugs

**Contenu** :
- Documentation Gestio V4 (bibliotheque/)
- Historique des bugs r√©solus
- Patches appliqu√©s

---

# üìÖ PHASE 3 : APPRENTISSAGE ANALYSTE (6-12 mois)

## Objectif
Entra√Æner ANALYSTE local pour remplacer MENTORE (Gemini).

## Workflow Teacher-Student (Clarifi√©)

### √âtape 3.1 : ANALYSTE en Observation (Mois 1-6)
```
MENTORE (Professeur) :
1. Re√ßoit logs utilisateur
2. G√©n√®re conseil avec Gemini 1.5 Flash
3. Conseil affich√© √† l'utilisateur
4. Utilisateur vote üëç ou üëé

ANALYSTE (√âl√®ve) :
1. Observe TOUT (logs + conseil + feedback)
2. Ne g√©n√®re RIEN
3. Accumule donn√©es dans Dataset d'Or
4. Objectif : 1000+ exemples valid√©s (üëç)
```

### √âtape 3.2 : ANALYSTE en Apprentissage (Mois 6-9)
```
1. Fine-tuner Llama 3 8B sur Dataset d'Or
2. ANALYSTE g√©n√®re conseils en parall√®le de MENTORE
3. Comparer qualit√© (A/B testing)
4. Si ANALYSTE ‚â• 80% qualit√© MENTORE ‚Üí Phase 3.3
```

### √âtape 3.3 : ANALYSTE en Production (Mois 9-12)
```
1. ANALYSTE remplace MENTORE pour 50% du trafic
2. MENTORE valide conseils ANALYSTE (contr√¥le qualit√©)
3. Si validation OK ‚Üí Conseil envoy√©
4. Si validation KO ‚Üí MENTORE g√©n√®re nouveau conseil
5. Progressivement : 50% ‚Üí 80% ‚Üí 100% ANALYSTE
```

### √âtape 3.4 : D√©sactivation MENTORE (Mois 12+)
```
1. ANALYSTE g√®re 100% des conseils
2. MENTORE d√©sactiv√© (√©conomie $$$)
3. Mode autonome total
```

---

# üí∞ Estimation Co√ªts Globale

## Phase 1 (MVP Coach - 2 mois)
```
Gemini 1.5 Flash : ~$1/mois
Total : $2
```

## Phase 2 (Maintenance Auto - 2 mois)
```
Gemini 1.5 Flash : ~$1/mois
Claude 3.5 Sonnet : ~$10/mois (debugging)
Total : $22
```

## Phase 3 (Apprentissage - 12 mois)
```
Gemini 1.5 Flash : ~$1/mois
Claude 3.5 Sonnet : ~$10/mois
Fine-tuning Llama 3 : $0 (local)
Total : $132 (sur 12 mois)
```

## Phase 4 (Autonomie - ‚àû)
```
Tout local (Ollama + Llama 3)
Co√ªt : $0/mois
```

**Co√ªt total projet : ~$156 sur 18 mois**

---

# üéØ Prochaines √âtapes Imm√©diates

## Avant de Commencer Phase 1
1. ‚úÖ **Terminer apprentissage** : Typing, Numpy, Streamlit
2. ‚è≥ **Apprendre LangChain** : 
   - Tutoriel officiel (2-3 jours)
   - Cr√©er agent simple "Hello World"
3. ‚è≥ **Setup environnement** :
   - Installer Docker
   - Cr√©er projet `squad_lamoms/`
   - Tester API Gemini

## Pendant Phase 1 (Ordre d'ex√©cution)
1. **Semaine 1** : Setup + MENTORE
2. **Semaine 2** : COACH (Streamlit)
3. **Semaine 3** : Boucle d'apprentissage
4. **Semaine 4** : Tests + Optimisation
5. **Semaine 5-8** : Collecte de 20+ feedbacks r√©els

---

# üìä M√©triques de Succ√®s

## Phase 1
- [ ] 20+ conseils g√©n√©r√©s
- [ ] 70%+ de satisfaction (üëç)
- [ ] Temps de r√©ponse < 5s
- [ ] Co√ªt < $2/mois

## Phase 2
- [ ] 5+ bugs auto-r√©par√©s
- [ ] 0 r√©gression introduite
- [ ] Co√ªt < $25/mois

## Phase 3
- [ ] 1000+ exemples dans Dataset d'Or
- [ ] ANALYSTE = 80%+ qualit√© MENTORE
- [ ] Transition 100% ANALYSTE r√©ussie

## Phase 4
- [ ] Co√ªt = $0/mois
- [ ] Autonomie totale
- [ ] Satisfaction utilisateur maintenue

---

# üöÄ Vision Long Terme

**Mois 1-2** : MVP Coach fonctionnel (vous comme testeur)  
**Mois 3-4** : Maintenance auto op√©rationnelle  
**Mois 5-12** : Apprentissage ANALYSTE  
**Mois 12+** : Autonomie totale + Ouverture √† d'autres utilisateurs  
**Ann√©e 2** : Marketplace d'agents Lamoms pour d'autres apps

**Objectif ultime** : Une IA propri√©taire, gratuite et experte sur Gestio V4 ! üí™
